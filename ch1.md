# AWS 인프라

## 1. AWS 소개
### 1. 클라우드 : 언제 어디서든지 원하는 때 `원하는 만큼의 IT 리소스(스토리지, 네트워크, 컴퓨팅)` 등을 손쉽게 사용할 수 있게 하는 서비스
````
사용자 -> 인터넷 -> 서버 & 네트워크 & 스토리지
````
#### 1) 클라우드 서비스 종류
````java
1. IaaS(Infrastructure as a Service)
 > 서버, 네트워크, 스토리지 를 클라우드 사업자가 제공 및 운영
   `사용자가 가상 서버에 필요한 프로그램을 설치 및 관리`
   ex) EC2(컴퓨팅), VPC(네트워크), EBS(스토리지)

2. Paas(Platform as a Service)
 > IT자원 이외에  `운영 체제, 미들웨어, 런타임` 을 제공.
   ex) AWS Elastic Beanstalk(애플리케이션 배포)

3. Serverless 플랫폼
 > 애플리케이션 개발에 필요한 대부분을 클라우드 사업자가 제공 및 운영 관리.
   사용자는 개발에만 집중하는 환경
   ex) Lambda(컴퓨팅), API Gateway(API 프록시)

4. Saas(Software as a Service)
 > 클라우드 사업자가 다양한 리소스 제공

※ 밑으로 내려올수록 더욱 개발에만 집중할수 있도록 해줌
````
#### 2)  클라우드 구현 모델
  - 구현모델은 3가지 유형이 있다.
````JAVA
1. 퍼블릭 클라우드
 > 서비스 제공 업체가 운영 관리, 사용자는 해당 클라우드의 리소스를 사용
   ex) 사용자 -> 인터넷 -> AWS CLOUD [ VPC(네트워크) -> 서버&네트워크&스토리지 ] 
        
2. 프라이빗 클라우드
 > 사용자가 나신의 온프레미스(기업 데이터센터)내에 클라우드 플랫폼을 구축하여 직접 사용하는 모델
   ex) 사용자 -> 데이터센터 -> 서버 & 네트워크 & 스토리지
        
3. 하이브리드 클라우드(퍼블릭 + 프라이빗)
````
### 2. AWS 클라우드 소개
- 전 세계적으로 분포한 데이터 센터에서, 다양한 서비스 제공하는 클라우드 플랫폼.
- 이중화된 네트워크 연결로 안정적인 서비스 제공.

#### 1) AWS 글로벌 인프라
- 전 세계 24개 리전을 갖고 있음.

#### 2) 데이터센터
- AWS 데이터센터는 3가지 영역으로 분류하여 볼 수 있음.
- 물리영역, IT 인프라영역, 운영 영역

#### 3) 가용영역
- 한 개 이상의 데이터 센터들의 모음
- 서울에는 4개의 가용 영역이 있음

#### 4) 리전
- 지리적인 영역 내에서 격리되고 물리적으로 분리된 `여러 개의 가용 영역의 모음`
- 리전은 최소 2개에서 6개 가용 영역으로 구성
- 특정 `가용영역` 에서 물리적으로 재난/재해 시 `서비스 불가` 따라서, `가용 영역` 분산 하여 구성 권장

#### 5) 엣지
- `외부 인터넷`과 `AWS 글로벌 네트워크망을 연결`하는 별도의 센터
  - `엣지 로케이션`, `리전별 엣지 캐시`, `CDN` 데이터 캐시 기능 제공
- CloudFront(`CDN서비스`), Direct Connect, Route53(`DNS서비스`), AWS Shield(`DDos Protection`), AWS Global Accelerator가 `엣지`에서 동작함.
- 백본 네트워크는 AWS 글로벌 네트워크망과 연결, 중국을 제외한 모든 AWS 리전과 연결
  - 서울은 1개의 리전별 엣지 캐시, 4개의 엣지 로케이션, 5개의 엣지가 구성

#### 6) AWS 인프라구조
- AWS 사용자는 서비스 구성 시 여러 가용 영역에 분산하여 처리할 수 있도록 구성을 권장

### 3. AWS 제품
- EC2(Elastic Compute Colud)
  - 물리 환경의 서버 컴퓨터 제공. 가상머신으로 제공되며 `인스턴스`라고 부른다.
  - `다양한 인스턴스 타입 및 스펙(cpu,메모리,디스크 등)`으로 구분, 사용한 만큼 비용을 지불
- 오토 스케일링(Auto Scaling)
  - EC2 인스턴스의 `조건에 따라 자동으로 서버를 추가 or 제거` 해주는 서비스
- 람다(AWS Lamda) - 서버리스 컴퓨팅
  - 프로그램을 실행하는 컴퓨팅 엔진(서버 구성 없이 코드로 작성된 함수를 호출할때 사용)
- 네트워킹 서비스
- 스토리지 서비스
  - EBS(Elastic Block Store)
    - EC2 인스턴스에 연결되어 사용할 수 있는 `블록 스토리지`, `용량 추가 가능`
  - S3(Simple Storage Service) 
    - 객체 기반의 `무제한 파일을 저장할 수 있는 스토리지`
- 데이터베이스 서비스
  - Amazon RDS(Relational Database Service)
    - `데이터베이스 인스턴스` 유형 제공, 6개의 DB 엔진 선택 사용 가능
  - Amazon DynamoDB
    - key-value 및 `NoSQL 데이터베이스`, `대규모 데이터 저장 및 처리`, `서버리스` 서비스

- 그 외 서비스
  - AWS CloudFormation
    - `프로그래밍 언어` 및 `텍스트 파일`을 통해 `AWS 리소스를 자동으로 배포하는 기능`
  - AWS CloudWatch
    - AWS 리소스 및 온프레미스의 `자원을 모니터링하는 서비스`. `로그 저장` 및 `알람 기능 제공`

## 2. AWS Network 소개
### 1. AWS VPC - 리소스 격리
 - `Virtual Private Control` AWS 클라우드 내 논리적으로 독립적 섹션을 의미한다.
 - `독립된 가상의 클라우드 네트워크`
### 2. AWS VPN - 가상 사설망
 - `Virtual Private Network` 공용 인터넷을 통해 가상의 사설 네트워크를 구성하여 프라이빗 통신을 제공한다.
 - VPN 서비스는 `Site-to-Site VPN`, `클라이언트 VPN`을 제공한다.
````
- AWS site to site VPN 연결

AWS 서울리전 - 가상 프라이빗 게이트웨이 <--> 게이트웨이 - 회사 IDC 
````
### 3. ELB - 로드 밸런서
 - `Elastic Load Balancing`, 로드 밸런싱 기술이다.
 - 서비스 대상 시스템에 대해 데이터 분산 전달 역할
### 4. AWS PrivateLink - 프라이빗 연결
 - 내부 네트워크 끼리 비공개 연결을 제공한다.
### 5. Route 53 - 도메인 네임 시스템
 - AWS에서 제공하는 DNS 서비스. Rooute 53을 통해 도메인을 구매, 호스팅 영역 설정을 통해, 도메인 질의에 대한 응답을 처리
### 6. AWS 전송 게이트웨이 - 네트워크 확장
 - `VPC`나 `온프레미스` 등의 네트워크를 단일 지점으로 연결할 수 있는 라우팅 서비스
````
AWS 서울리전 - 전송 게이트웨이 <-> AWS 홍콩리전
                             <-> 회사 IDC
````
### 7. AWS Direct Connect - AWS 전용 연결
 - AWS와의 전용 네트워크 연결을 제공하는 전용선 서비스
### 8. AWS CloudFront - CDN(콘텐츠 전송/캐시)
 - CDN 서비스
### 9. AWS Global Accelerator - 글로벌 전송
 - 로컬 or 글로벌 사용자 대상 가용성/성능 개선 서비스, 네트워크 경로를 최적화하여 트래픽 성능을 개선
### 10. 네트워크 보안
 - 보안 그룹, 네트워크 ACL, 웹 방화벽

## 3.실습 전 사전 준비 사항
### 1. AWS 회원 가입 및 프리 티어
### 2. AWS 사용하기
````
AWS 관리 콘솔(웹)
AWS 명령 줄 인터페이스(AWS CLI)
소프트웨어 개발 키트(AWS SDK)
````
### 3. AWS 관리 콘솔 접근하기
### 4. SSH 소개
 - EC2 인스턴스 접근하기 위해서는 SSH(Secure SHell) 키 페이거 필요.
 - SSH는 `SSH 서버`와 `SSH 클라이언트`로 구성된다. `SSH 클라이언트`가 `SSH 서버`에 접속하기 위해서는 인증 절차가 필요하다.
 - SSH 인증 방식은 `유저-암호` 입력 방식, `키-페이 파일`(보통 선호)을 이용한 방식이 있음.
````
             SSH 연결
SSH 클라이언트 -----> SSH 서버
````
### 5. AWS SSH 키 페어 생성(서울 리전)

## 4. EC2 배포 및 사용
````
AWS 관리콘솔 EC2 배포
사용자 PC SSH로 EC2 접근
EC2 웹 서비스 설치
EC2 인스턴스 삭제
````
## 5. CloudFormation 스택 생성 및 삭제
- 인프라를 자동 생성/삭제 하도록 도와줌.

### 1. CloudFormation
#### 1) CloudFormation 이란
- CloudFormation는 AWS 인프라에 대해 코드로 정의, 자동으로 자원 생성 및 삭제`(IaC, Infrastruecture as Code)`
- 템플릿 : JSON 이나 YAML 으로 작성
- 작성한 템플릿을 CloudFormation에 업로드 하여 자원을 생성 및 삭제 한다.
#### 2) CloudFormation 템플릿